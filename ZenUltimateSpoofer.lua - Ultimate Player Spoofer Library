-- ZenUltimateSpoofer.lua - Ultimate Player Spoofer Library
return (function()
    local UltimateSpoofer = {}
    local OriginalFunctions = {}
    local SpoofedData = {}
    
    -- Fonction pour v√©rifier si l'AC Bypass est charg√©
    local function checkACBypassLoaded()
        -- V√©rifier si la librairie AC Bypass est pr√©sente
        if _G.ZenACBypassLoaded or _G.ZenAntiCheatBypass then
            return true
        end
        
        -- V√©rifier dans l'environnement global
        if getgenv and getgenv().ZenACBypassLoaded then
            return true
        end
        
        -- V√©rifier les fonctions caract√©ristiques
        if _G.ScanForThreats or _G.ZenACB then
            return true
        end
        
        return false
    end

    -- Cr√©er l'interface d'alerte
    local function createWarningGUI()
        if game:GetService("CoreGui"):FindFirstChild("ZenSpooferWarning") then
            return
        end
        
        local ScreenGui = Instance.new("ScreenGui")
        local Frame = Instance.new("Frame")
        local WarningLabel = Instance.new("TextLabel")
        local MessageLabel = Instance.new("TextLabel")
        local CopyButton = Instance.new("TextButton")
        local CloseButton = Instance.new("TextButton")
        local BlurEffect = Instance.new("BlurEffect")
        
        ScreenGui.Name = "ZenSpooferWarning"
        ScreenGui.Parent = game:GetService("CoreGui")
        ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
        
        -- Effet de flou
        BlurEffect.Parent = game:GetService("Lighting")
        BlurEffect.Size = 24
        BlurEffect.Name = "ZenSpooferBlur"
        
        Frame.Parent = ScreenGui
        Frame.Size = UDim2.new(0, 400, 0, 250)
        Frame.Position = UDim2.new(0.5, -200, 0.5, -125)
        Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
        Frame.BorderSizePixel = 0
        Frame.BackgroundTransparency = 0.1
        
        WarningLabel.Parent = Frame
        WarningLabel.Size = UDim2.new(0.9, 0, 0, 40)
        WarningLabel.Position = UDim2.new(0.05, 0, 0.05, 0)
        WarningLabel.BackgroundTransparency = 1
        WarningLabel.Text = "‚ö†Ô∏è SECURITY WARNING"
        WarningLabel.TextColor3 = Color3.fromRGB(255, 50, 50)
        WarningLabel.Font = Enum.Font.SourceSansBold
        WarningLabel.TextSize = 20
        WarningLabel.TextStrokeTransparency = 0
        
        MessageLabel.Parent = Frame
        MessageLabel.Size = UDim2.new(0.9, 0, 0, 100)
        MessageLabel.Position = UDim2.new(0.05, 0, 0.25, 0)
        MessageLabel.BackgroundTransparency = 1
        MessageLabel.Text = "ZenAntiCheatBypass library is not loaded!\n\nYour account is at risk without proper protection.\nThe spoofer may not work correctly without AC bypass."
        MessageLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
        MessageLabel.Font = Enum.Font.SourceSans
        MessageLabel.TextSize = 16
        MessageLabel.TextWrapped = true
        
        CopyButton.Parent = Frame
        CopyButton.Size = UDim2.new(0.4, 0, 0, 35)
        CopyButton.Position = UDim2.new(0.05, 0, 0.75, 0)
        CopyButton.BackgroundColor3 = Color3.fromRGB(0, 100, 200)
        CopyButton.BorderSizePixel = 0
        CopyButton.Text = "üìã Copy GitHub Link"
        CopyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        CopyButton.Font = Enum.Font.SourceSansBold
        CopyButton.TextSize = 14
        
        CloseButton.Parent = Frame
        CloseButton.Size = UDim2.new(0.4, 0, 0, 35)
        CloseButton.Position = UDim2.new(0.55, 0, 0.75, 0)
        CloseButton.BackgroundColor3 = Color3.fromRGB(150, 50, 50)
        CloseButton.BorderSizePixel = 0
        CloseButton.Text = "‚ùå Close"
        CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        CloseButton.Font = Enum.Font.SourceSansBold
        CloseButton.TextSize = 14
        
        -- Fonctionnalit√©s des boutons
        CopyButton.MouseButton1Click:Connect(function()
            if setclipboard then
                setclipboard("https://github.com/YourUsername/ZenAntiCheatBypass")
                CopyButton.Text = "‚úÖ Copied!"
                task.wait(2)
                CopyButton.Text = "üìã Copy GitHub Link"
            end
        end)
        
        CloseButton.MouseButton1Click:Connect(function()
            ScreenGui:Destroy()
            if BlurEffect.Parent then
                BlurEffect:Destroy()
            end
        end)
        
        -- Emp√™cher la fermeture facile
        Frame.Active = true
        Frame.Draggable = true
        
        return ScreenGui
    end

    -- G√©n√©rer des donn√©es al√©atoires r√©alistes
    local function generateFakeData()
        local firstNames = {"John", "Mike", "David", "Chris", "Alex", "James", "Robert", "Michael", "William", "Richard"}
        local lastNames = {"Smith", "Johnson", "Williams", "Brown", "Jones", "Garcia", "Miller", "Davis", "Rodriguez", "Martinez"}
        
        return {
            username = firstNames[math.random(1, #firstNames)] .. lastNames[math.random(1, #lastNames)] .. math.random(10, 99),
            userId = math.random(1000000, 9999999),
            accountAge = math.random(365, 3650),
            displayName = firstNames[math.random(1, #firstNames)] .. lastNames[math.random(1, #lastNames)],
            membership = math.random(0, 1) == 1 and "Premium" or "None",
            country = "United States"
        }
    end

    -- Spoof avanc√© des fonctions de base
    local function spoofCoreFunctions()
        if not hookfunction then 
            warn("‚ùå Hookfunction not available - Spoof limited")
            return 
        end
        
        local fakeData = generateFakeData()
        SpoofedData = fakeData
        
        -- Spoof GetUserId
        if type(game.Players.LocalPlayer.GetUserId) == "function" then
            OriginalFunctions.GetUserId = game.Players.LocalPlayer.GetUserId
            hookfunction(game.Players.LocalPlayer.GetUserId, function(self)
                return fakeData.userId
            end)
        end
        
        -- Spoof GetAccountAge
        if type(game.Players.LocalPlayer.GetAccountAge) == "function" then
            OriginalFunctions.GetAccountAge = game.Players.LocalPlayer.GetAccountAge
            hookfunction(game.Players.LocalPlayer.GetAccountAge, function(self)
                return fakeData.accountAge
            end)
        end
        
        -- Spoof Name
        if game.Players.LocalPlayer then
            OriginalFunctions.Name = game.Players.LocalPlayer.Name
            local nameMt = getrawmetatable(game.Players.LocalPlayer)
            if nameMt and nameMt.__index then
                local originalIndex = nameMt.__index
                hookfunction(nameMt.__index, function(self, key)
                    if key == "Name" then
                        return fakeData.username
                    end
                    return originalIndex(self, key)
                end)
            end
        end
    end

    -- Fonction principale de spoof avec v√©rification de s√©curit√©
    function UltimateSpoofer.UltimateSpoof()
        -- V√©rifier d'abord si l'AC Bypass est charg√©
        if not checkACBypassLoaded() then
            warn("üö® SECURITY WARNING: ZenAntiCheatBypass not loaded!")
            createWarningGUI()
            
            -- Demander confirmation dans la console
            print("\n‚ö†Ô∏è  ‚ö†Ô∏è  ‚ö†Ô∏è  SECURITY WARNING  ‚ö†Ô∏è  ‚ö†Ô∏è  ‚ö†Ô∏è")
            print("ZenAntiCheatBypass library is not loaded!")
            print("Your account may be at risk.")
            print("GitHub: https://github.com/YourUsername/ZenAntiCheatBypass")
            print("Continue anyway? (Spoof may not work properly)\n")
        else
            print("‚úÖ ZenAntiCheatBypass detected - Safe to proceed")
        end
        
        print("üé≠ Starting Ultimate Spoof...")
        
        -- Proc√©der au spoof m√™me sans AC Bypass (mais avec avertissement)
        spoofCoreFunctions()
        
        print("‚úÖ Ultimate Spoof Completed!")
        print("üìä Spoofed Data:")
        print("   Username: " .. SpoofedData.username)
        print("   UserId: " .. SpoofedData.userId)
        print("   Account Age: " .. SpoofedData.accountAge .. " days")
    end
    
    function UltimateSpoofer.GetSpoofedData()
        return SpoofedData
    end
    
    function UltimateSpoofer.CheckSecurity()
        return checkACBypassLoaded()
    end

    -- V√©rification automatique au chargement
    task.spawn(function()
        task.wait(2) -- Attendre que d'autres scripts se chargent
        
        if not checkACBypassLoaded() then
            createWarningGUI()
        else
            print("üîí ZenSpoofer: AC Bypass detected - Security OK")
        end
        
        -- Lancer le spoof automatiquement
        UltimateSpoofer.UltimateSpoof()
    end)

    return UltimateSpoofer
end)()
